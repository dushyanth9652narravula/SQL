
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Querying the Data &#8212; My sample book</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=9c3e77be" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=1ae7504c"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = '2_Querying_Data';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data Definition Language" href="3_Data_Definition_Language.html" />
    <link rel="prev" title="Introduction to SQL" href="1_Introduction_to_SQL.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="1_Introduction_to_SQL.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="My sample book - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="My sample book - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="1_Introduction_to_SQL.html">
                    Introduction to SQL
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Querying the Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="3_Data_Definition_Language.html">Data Definition Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="4_Data_Manipulation_Language.html">Data Manipulation Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="5_Filtering_Data.html">Filtering Data</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="6_Combining_Data/01_Introduction_to_combining_data.html">Combining Data</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="6_Combining_Data/02_SQL_Joins.html">SQL Joins</a></li>
<li class="toctree-l2"><a class="reference internal" href="6_Combining_Data/03_SQL_Set_Operators.html">SET Operators</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="7_SQL_Functions/01_Introduction_to_SQL_Functions.html">SQL Functions</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="7_SQL_Functions/02_String_Functions.html">String Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="7_SQL_Functions/03_Number_Functions.html">Number Functions</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2F2_Querying_Data.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/2_Querying_Data.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Querying the Data</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#select-and-from-clause">SELECT and FROM Clause</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#where-clause">WHERE Clause</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#order-by-clause">ORDER BY Clause</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#group-by-clause">GROUP BY Clause</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#having-clause">HAVING Clause</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#distinct-clause">DISTINCT Clause</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#top-clause">TOP Clause</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#coding-and-execution-order-of-the-sql-query">Coding and Execution Order of the SQL Query</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary-of-querying-data">Summary of Querying Data</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="querying-the-data">
<h1>Querying the Data<a class="headerlink" href="#querying-the-data" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Querying the data is nothing but asking a question to a database by writing a query. Whenever you execute that query, the database process that query (question) and send back a response in the form of data that we want.</p></li>
<li><p>In SQL, we majorly use SELECT clause to query the data from the database. But there are other clauses that we use for querying the data. Those are DISTINCT, TOP, FROM, WHERE, JOIN, GROUPBY, HAVING and ORDERBY. In order to master the concept of querying the data we need to know the usage of these clauses and execution order of these clauses.</p></li>
</ul>
<section id="select-and-from-clause">
<h2>SELECT and FROM Clause<a class="headerlink" href="#select-and-from-clause" title="Link to this heading">#</a></h2>
<ul>
<li><p>In SQL, SELECT clause is used to select the particular columns of a table in a database. Whereas the FROM clause is used to get the data (or table) from database. In simpler words, FROM clause tells sql about the table that you need to look into it and SELECT clause tells the lists of columns that we need from that table.</p></li>
<li><p><strong>Ex</strong> : Retrieve all columns from the customers table</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">Customers</span>
</pre></div>
</div>
</li>
<li><p><strong>Ex</strong> : Retrieve first_name, country, score columns from the customers table</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span>
<span class="n">first_name</span><span class="p">,</span>
<span class="n">country</span><span class="p">,</span>
<span class="n">score</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">Customers</span>
</pre></div>
</div>
</li>
<li><p><strong>Note</strong> : If you want to get all columns from a table then we doesn’t need to specify all column names from the table, we just need to use asterik (<code class="docutils literal notranslate"><span class="pre">*</span></code>) marks instead of them. And one more thing we need to know that, SQL retrieve the columns in the order we have been specified. Suppose if you listed the columns as country, first_name and score then it prints the columns in the same order.</p></li>
</ul>
</section>
<section id="where-clause">
<h2>WHERE Clause<a class="headerlink" href="#where-clause" title="Link to this heading">#</a></h2>
<ul>
<li><p>In SQL, WHERE clause is used to filter the data present the table based on a condition. Suppose if we want to retrieve the customers of germany country only then we need to use the WHERE clause with the condition <code class="docutils literal notranslate"><span class="pre">country</span> <span class="pre">=</span> <span class="pre">'Germany'</span></code>.</p></li>
<li><p>We need to write the WHERE clause right after the From clause. And WHERE clause starts executing once FROM clause got executed.</p></li>
<li><p><strong>Ex</strong> : Retrieve the customers from the Germany Country</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">Customers</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">Country</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Germany&#39;</span>
</pre></div>
</div>
</li>
<li><p><strong>Explanation</strong> : First SQL executes the FROM clause by loading the Customers Table from the database. Then it filters the Customers table by using <code class="docutils literal notranslate"><span class="pre">Country</span> <span class="pre">=</span> <span class="pre">'Germany'</span></code> condition. Once the table gets filtered then it starts selecting the columns that we have listed with SELECT Clause. Here we have used the <code class="docutils literal notranslate"><span class="pre">*</span></code>, so it selects all the columns.</p></li>
</ul>
</section>
<section id="order-by-clause">
<h2>ORDER BY Clause<a class="headerlink" href="#order-by-clause" title="Link to this heading">#</a></h2>
<ul>
<li><p>In SQL, ORDER BY clause is used to sort the data in Ascending or Descending order. Once the Sql gets the table (data) and filtered it, then ORDER BY clause gets executed. ORDER BY uses a column to sort the data present in the filtered table (if where clause is present). It has two keywords. Those are <code class="docutils literal notranslate"><span class="pre">ASC</span></code> and <code class="docutils literal notranslate"><span class="pre">DESC</span></code>. <code class="docutils literal notranslate"><span class="pre">ASC</span></code> sorts the data in Ascending order and <code class="docutils literal notranslate"><span class="pre">DESC</span></code> sorts the data in Descending order.</p></li>
<li><p><strong>Ex</strong> : Retrieve all customers and sort the score of customers from highest to lowest.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">Customers</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="k">DESC</span>
</pre></div>
</div>
</li>
<li><p>We can list multiple columns in ORDER BY clause to sort the data which is called as Nested Sorting. But this nested sorting is only useful if the first column we are using in ORDER BY clause has repetition. If there is no repetition then nested sorting is useless.</p></li>
<li><p>For example in customer table, country column has repetition. So if you sort the countries first in ASC or DESC and then sort any column in the table then we can get sorted results related to each country. Suppose you have sorted countries in Ascending order and then sorts the scores in Descending order, then you get scores of all customers in descending order for each country only. You wont get score in descending order for entire table. ORDER BY sorts the score for each country seperately once country column gets sorted.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">Customers</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="k">ASC</span><span class="p">,</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="k">DESC</span>
</pre></div>
</div>
</li>
<li><p><strong>Note</strong> : By default, ORDER BY sorts the data in Ascending Order if we won’t use any keyword like ASC or DESC. But using the keyword increases the readability, so that we can easily understand when we see that SQL Query.</p></li>
</ul>
</section>
<section id="group-by-clause">
<h2>GROUP BY Clause<a class="headerlink" href="#group-by-clause" title="Link to this heading">#</a></h2>
<ul>
<li><p>In SQL, GROUP BY Clause is used to combine the data of a column which are repeating and perfrom aggregations on the corresponding columns. In simpler words, Group By makes all repeated words into single word and perform aggregations on corresponding values of these repeated words which means it combines data of all rows of a particular category such as country, color, id and so on.</p></li>
<li><p>There are mainly 5 aggregation functions in SQL. Those are SUM(), AVG(), MIN(), MAX(), COUNT().</p></li>
<li><p><strong>Ex</strong> : Find the total score of each country in the customers table</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span>
<span class="n">country</span><span class="p">,</span>
<span class="k">SUM</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">total_score</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">Customers</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">country</span>
</pre></div>
</div>
</li>
<li><p>In the above query, SQL first runs the FROM clause to get the Customers table and perform GROUP BY Clause on the Customers table based on the Country Column which combines all the data for each country and then SUMS the scores of each country and return it.</p></li>
<li><p>When we are using the GROUP BY Clause, we need to remember one thing first. That is, the columns listed in SELECT Clause (Which are not present in Aggregation functions) should be listed in GROUP BY clause also. If not SQL returns an error.</p></li>
<li><p><strong>Ex</strong> : Find the total score and total customers for each country in customers table.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span>
<span class="n">country</span><span class="p">,</span>
<span class="k">SUM</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">total_score</span><span class="p">,</span>
<span class="k">COUNT</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">total_customers</span>
<span class="k">From</span><span class="w"> </span><span class="n">Customers</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">country</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="having-clause">
<h2>HAVING Clause<a class="headerlink" href="#having-clause" title="Link to this heading">#</a></h2>
<ul>
<li><p>In SQL, HAVING Clause is used to filter the data after performing the aggregation which means if you want to filter the data after performing the GROUP BY, then we use HAVING Clause.</p></li>
<li><p><strong>Ex</strong> : Find the total score of each country and return the countries which has total score greater than 800.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
<span class="n">country</span><span class="p">,</span>
<span class="k">SUM</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">total_score</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">Customers</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">country</span>
<span class="k">HAVING</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">800</span>
</pre></div>
</div>
</li>
<li><p>If you wanna see the difference between WHERE and HAVING Clause then we can see the below example.</p></li>
<li><p><strong>Ex</strong> : Find the average score of each country considering only customers not equal to score zero and return the countries only that has average score higher than 430.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
<span class="n">country</span><span class="p">,</span>
<span class="k">AVG</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">avg_score</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">Customers</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">country</span>
<span class="k">HAVING</span><span class="w"> </span><span class="k">AVG</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">430</span>
</pre></div>
</div>
</li>
<li><p>In the above example, if you see, i have used both WHERE and HAVING Clause. Here SQL first executes FROM clause to get the customers table and then it executes WHERE Clause to filter th customer who has score not equal to zero (as we shouldn’t include those customers while finding the average values) and then it performed GROUP BY Operation to combine the Country data (At this step it won’t find the average values). And then it executes the HAVING Clause by finding average scores of each country and removes the countries whose average score is less than 430 and then it start executing the SELECT Clause which asks it to return the Country and the average score of final result.</p></li>
</ul>
</section>
<section id="distinct-clause">
<h2>DISTINCT Clause<a class="headerlink" href="#distinct-clause" title="Link to this heading">#</a></h2>
<ul>
<li><p>In SQL, DISTINCT Clause is used in conjunction with SELECT Clause. It is used to find the distinct elements or values present in a coulmn or used to list the distinct values in a column by removing the duplicates.</p></li>
<li><p><strong>Ex</strong> : Find the unique list of countries present in customers table</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
<span class="k">DISTINCT</span><span class="w"> </span><span class="n">country</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">Customers</span>
</pre></div>
</div>
</li>
<li><p>If you want to find the distinct elements of combination of two columns then we just need to list those two columns after DISTINCT Clause</p></li>
<li><p><strong>Ex</strong> : Find the unique list of customers and countries from customers table</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
<span class="k">DISTINCT</span><span class="w"> </span><span class="n">first_name</span><span class="p">,</span><span class="w"> </span><span class="n">country</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">Customers</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="top-clause">
<h2>TOP Clause<a class="headerlink" href="#top-clause" title="Link to this heading">#</a></h2>
<ul>
<li><p>In SQL, TOP Clause is used to limit the no of rows in the final output. If you want to get only top 5 customers from customer table which consisting of 1000 customers then we can use TOP Clause. It is generally used after the SELECT Clause but before the list of columns. SQL executes the TOP Clause at the last phase of the query.</p></li>
<li><p><strong>Ex</strong> : Return the top 3 customers from the customers table</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
<span class="n">TOP</span><span class="w"> </span><span class="mi">3</span>
<span class="o">*</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">Customers</span>
</pre></div>
</div>
</li>
<li><p><strong>Ex</strong> : Return the top 3 highest score customers from customers table.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span>
<span class="n">TOP</span><span class="w"> </span><span class="mi">3</span>
<span class="o">*</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">Customers</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="k">DESC</span>
</pre></div>
</div>
</li>
<li><p>In the above example, first we have sorted the customers in descending order based on the score and then we have selected only top 3 customers from the output. From this we can say that TOP Clause is one which gets executed in the last phase of query execution by DBMS.</p></li>
</ul>
</section>
<section id="coding-and-execution-order-of-the-sql-query">
<h2>Coding and Execution Order of the SQL Query<a class="headerlink" href="#coding-and-execution-order-of-the-sql-query" title="Link to this heading">#</a></h2>
<ul>
<li><p>Coding order of a SQL Query is nothing but the order of writing the SQL Query. First we need to write the SELECT clause and then we need to write DISTINCT Clause (as DISTINCT is just a mode that how we need to select the column like we need to select columns as it is or we need to select columns by removing duplicates). Third we need to write the TOP clause and then list of columns should follows the TOP Clause. At fifth we need to write the FROM Clause and then we need to Write the Where Clause. At seventh we need to write the GROUP BY Clause and at eight we need to write the HAVING Clause. And finally we need to write the ORDER BY Clause. So Coding Order is <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">-&gt;</span> <span class="pre">DISTINCT</span> <span class="pre">-&gt;</span> <span class="pre">TOP</span> <span class="pre">-&gt;</span> <span class="pre">List_Of_Columns</span> <span class="pre">-&gt;</span> <span class="pre">FROM</span> <span class="pre">-&gt;</span> <span class="pre">WHERE</span> <span class="pre">-&gt;</span> <span class="pre">GROUP</span> <span class="pre">BY</span> <span class="pre">-&gt;</span> <span class="pre">HAVING</span> <span class="pre">-&gt;</span> <span class="pre">ORDER</span> <span class="pre">BY</span></code></p></li>
<li><p>The following SQL Query is example of Coding Order.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">DISTINCT</span>
<span class="n">TOP</span><span class="w"> </span><span class="n">n</span>
<span class="n">col1</span><span class="p">,</span>
<span class="k">SUM</span><span class="p">(</span><span class="n">col2</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">total</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">t1</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">col3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col1</span>
<span class="k">HAVING</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">col2</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">co1</span><span class="w"> </span><span class="k">DESC</span>
</pre></div>
</div>
</li>
<li><p>Now lets see the Execution Order of above Query. The Execution starts at FROM Clause which gets or loads required table from the database. Then it starts executing the WHERE clause which filters the loaded table based on the condition. Then it starts executing the GROUP BY clause which generally combines rows based on the category (column) provided to GROUP BY Clause (At the stage of query parsing, sql know which aggregations that needs to perform on which columns based on the category or column). So at the stage of GROUP BY itself it peforms all aggregations provided in SELECT Clause and HAVING Clause itself. By the end of GROUP BY execution, it prepare a new table with aggregations and category. Then it starts executing the HAVING Clause by filtering the aggregated table. Now it starts executing the SELECT Clause and Distinct Clause also by selecting the list columns provided and performing DISTINCT Operation on selected columns. Now it starts executing ORDER BY Clause which sorts the final table in either Ascending or Descending Order. At final sql executes the TOP Clause by selecting the TOP n rows.</p></li>
<li><p>So the Execution Order is : <code class="docutils literal notranslate"><span class="pre">FROM</span> <span class="pre">-&gt;</span> <span class="pre">WHERE</span> <span class="pre">-&gt;</span> <span class="pre">GROUP</span> <span class="pre">BY</span> <span class="pre">-&gt;</span> <span class="pre">HAVING</span> <span class="pre">-&gt;</span> <span class="pre">SELECT</span> <span class="pre">-&gt;</span> <span class="pre">DISTINCT</span> <span class="pre">-&gt;</span> <span class="pre">ORDER</span> <span class="pre">BY</span> <span class="pre">-&gt;</span> <span class="pre">TOP</span></code></p></li>
</ul>
</section>
<section id="summary-of-querying-data">
<h2>Summary of Querying Data<a class="headerlink" href="#summary-of-querying-data" title="Link to this heading">#</a></h2>
<ul>
<li><p>Here, we have seen how to retrieve the data from the database using the 8 different clauses. Those are :</p>
<p><strong>SELECT</strong> : SELECT clause is used to select the list of columns.</p>
<p><strong>DISTINCT</strong> : DISTINCT clause is used to remove the duplicates and return the unique values from the selected columns</p>
<p><strong>FROM</strong> : FROM clause to get the table from the database or it says execution engine which table it needs to use for this query.</p>
<p><strong>WHERE</strong> : WHERE clause is used to filter the table based on a valid condition.</p>
<p><strong>GROUP BY</strong> : GROUP BY clause is used to combine the similar data into one row based on the column or category provided and perform aggregations listed on SELECT and HAVING clauses.</p>
<p><strong>HAVING</strong> : HAVING Clause is used to filter the resultant table after execution of GROUP BY clause.</p>
<p><strong>ORDER BY</strong> : ORDER BY clause is used to sort the data either in ascending or descending order by using ASC or DESC keywords.</p>
<p><strong>TOP</strong> : TOP clause is used to retrieve top n rows from the final Resultant table.</p>
</li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="1_Introduction_to_SQL.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Introduction to SQL</p>
      </div>
    </a>
    <a class="right-next"
       href="3_Data_Definition_Language.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Data Definition Language</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#select-and-from-clause">SELECT and FROM Clause</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#where-clause">WHERE Clause</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#order-by-clause">ORDER BY Clause</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#group-by-clause">GROUP BY Clause</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#having-clause">HAVING Clause</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#distinct-clause">DISTINCT Clause</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#top-clause">TOP Clause</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#coding-and-execution-order-of-the-sql-query">Coding and Execution Order of the SQL Query</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary-of-querying-data">Summary of Querying Data</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Jupyter Book Community
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>